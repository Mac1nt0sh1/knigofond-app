# Как проверить, что NeonDB активен

## В NeonDB Dashboard:

### Статус "Idle" (приостановлен):
- **Compute**: показывает "Primary • Idle"
- **График активности**: плоский (нет активности)
- **Примечание**: "Metrics may be delayed by an hour and are not updated for inactive projects"

Это означает, что проект **приостановлен** и автоматически "проснется" при первом запросе.

### Статус "Active" (активен):
- **Compute**: показывает "Primary • Active" (или просто "Primary")
- **График активности**: показывает активность
- **Метрики обновляются** в реальном времени

## Как "разбудить" проект:

### Способ 1: Просто выполните запрос

Любой запрос к базе данных автоматически активирует проект:

```powershell
npm run db:check
```

Или:

```powershell
npm run db:push
```

**Важно:** Первый запрос может занять 5-30 секунд, пока проект "просыпается". Это нормально!

### Способ 2: Через NeonDB Dashboard

1. Откройте [NeonDB Dashboard](https://console.neon.tech/)
2. Выберите ваш проект
3. Проект автоматически активируется при любом запросе

## Проверка через код:

### Вариант 1: Скрипт проверки

```powershell
npm run db:check
```

Если подключение успешно, значит проект активен (или автоматически активировался).

### Вариант 2: Prisma Studio

```powershell
npm run db:studio
```

Откроется интерфейс для работы с базой данных. Если проект приостановлен, он автоматически активируется.

## Что делать если проект Idle:

1. **Это нормально** - на бесплатном тарифе проекты автоматически приостанавливаются
2. **Просто выполните запрос** - проект автоматически активируется
3. **Подождите 5-30 секунд** - первый запрос может быть медленным
4. **После активации** последующие запросы будут быстрее

## Как поддерживать проект активным:

На бесплатном тарифе проект автоматически приостанавливается через некоторое время неактивности. Чтобы поддерживать его активным:

1. **Регулярные запросы** - делайте запросы к базе данных хотя бы раз в несколько часов
2. **Upgrade план** - на платных планах проекты не приостанавливаются автоматически

## Проверка статуса в коде:

Можно создать простой скрипт для проверки:

```javascript
// scripts/check-neon-status.js
const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

async function checkStatus() {
  try {
    const start = Date.now();
    await prisma.$queryRaw`SELECT 1`;
    const duration = Date.now() - start;
    
    if (duration > 5000) {
      console.log('⚠️  Проект был приостановлен и только что активировался');
      console.log(`   Время ответа: ${duration}ms`);
    } else {
      console.log('✅ Проект активен');
      console.log(`   Время ответа: ${duration}ms`);
    }
  } catch (error) {
    console.error('❌ Ошибка:', error.message);
  } finally {
    await prisma.$disconnect();
  }
}

checkStatus();
```

## Итог:

- **"Idle"** = приостановлен, но готов к активации
- **"Active"** = работает и готов к запросам
- **Любой запрос** автоматически активирует приостановленный проект
- **Первый запрос** может занять 5-30 секунд - это нормально!

